C51 COMPILER V9.60.7.0   MAIN                                                              10/07/2025 16:11:41 PAGE 1   


C51 COMPILER V9.60.7.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: B:\keil5\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\main.l
                    -st) TABS(2) OBJECT(.\Objects\main.obj)

line level    source

   1          #include <REGX52.H>
   2          
   3          int Delay(int xms)  //@12.000MHz
   4          {
   5   1        while(xms--){
   6   2          unsigned char data i, j;
   7   2      
   8   2          i = 2;
   9   2          j = 239;
  10   2          do
  11   2          {
  12   3            while (--j);
  13   3          } while (--i);
  14   2        }
  15   1        return 0;
  16   1      }
  17          
  18          
  19          void SMG(unsigned int place,num)
  20          {
  21   1        switch(place)
  22   1        {
  23   2          case 8:P2_2=0;P2_3=0;P2_4=0;break;
  24   2          case 7:P2_2=1;P2_3=0;P2_4=0;break;
  25   2          case 6:P2_2=0;P2_3=1;P2_4=0;break;
  26   2          case 5:P2_2=1;P2_3=1;P2_4=0;break;
  27   2          case 4:P2_2=0;P2_3=0;P2_4=1;break;
  28   2          case 3:P2_2=1;P2_3=0;P2_4=1;break;
  29   2          case 2:P2_2=0;P2_3=1;P2_4=1;break;
  30   2          case 1:P2_2=1;P2_3=1;P2_4=1;break;
  31   2        }
  32   1        switch(num)
  33   1        {
  34   2          case 1:P0=0x06;break;
  35   2          case 2:P0=0x5b;break;
  36   2          case 3:P0=0x4f;break;
  37   2          case 4:P0=0x66;break;
  38   2          case 5:P0=0x6d;break;
  39   2          case 6:P0=0x7d;break;
  40   2          case 7:P0=0x07;break;
  41   2          case 8:P0=0x7f;break;
  42   2          case 9:P0=0x6f;break;
  43   2          case 0:P0=0x3f;break;
  44   2        }
  45   1      }
  46          
  47          void clean()
  48          {
  49   1        P0=0x00;
  50   1      }
  51          
  52          void display(int sec,int min)
  53          {
  54   1        int i;
C51 COMPILER V9.60.7.0   MAIN                                                              10/07/2025 16:11:41 PAGE 2   

  55   1        for(i=0;i<250;i++)
  56   1        {
  57   2          SMG(8,sec%10);Delay(1);
  58   2          clean();
  59   2          SMG(7,sec/10);Delay(1);
  60   2          clean();
  61   2          SMG(4,min%10);Delay(1);
  62   2          clean();
  63   2          SMG(3,min/10);Delay(1);
  64   2          clean();
  65   2        }
  66   1      }
  67          
  68          
  69          
  70          void main()
  71          {
  72   1        int sec=0;
  73   1        int min=0;
  74   1        int flag=0;
  75   1      
  76   1        if(P3_1==0)
  77   1        {
  78   2          Delay(20);
  79   2          while(P3_1==0);
  80   2          Delay(20);
  81   2          flag=1;
  82   2        }
  83   1      
  84   1        while(flag)
  85   1        {
  86   2          display(sec,min);
  87   2          sec++;
  88   2          if(sec==60)
  89   2          {
  90   3            sec=0;
  91   3            min++;
  92   3            if(min==60)
  93   3              min=0;
  94   3          }
  95   2          if(P3_1==0)
  96   2          {
  97   3            Delay(20);
  98   3            while(P3_1==0);
  99   3            Delay(20);
 100   3            flag=0;
 101   3          }
 102   2        }
 103   1        while(!flag)
 104   1        {
 105   2          display(sec,min);
 106   2          if(P3_1==0)
 107   2          {
 108   3          Delay(20);
 109   3          if(P3_1==0)
 110   3            flag=1;
 111   3          }
 112   2      
 113   2        }
 114   1        
 115   1      }

C51 COMPILER V9.60.7.0   MAIN                                                              10/07/2025 16:11:41 PAGE 3   


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    475    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----      12
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
